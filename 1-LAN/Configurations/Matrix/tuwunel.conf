# Fun Fact: this used to be conduwuit config file before but since that project gotten archived, it's tuwunel now.
# I'm happy they still support conduwuit format, it was very easy to move to tuwunel.
[global]
# Best if you read the tuwunel documentation https://matrix-construct.github.io/tuwunel/configuration/examples.html
# The domain you'll host your server on - this can't be changed later so pick either main domain or localhost.domain.tld sub-domain like here.
server_name = "localhost.domain.tld"
# Address and port the server will listen on
address = ["10.30.1.11"]
port = 443
# Where to store the database and it's backups
database_path = "/var/lib/tuwunel"
database_backup_path = "/var/lib/tuwunel-backups"
database_backups_to_keep = 7
# Appens duck emoji to newcomers
new_user_displayname_suffix = "ðŸ¦†"
# I suppose good to enable if you will run this in a container
allow_check_for_updates = false
cache_capacity_modifier = 1.0
dns_cache_entries = 32768
dns_min_ttl = 10800
dns_min_ttl_nxdomain = 259200
dns_attempts = 10
dns_timeout = 10
dns_tcp_fallback = true
query_all_nameservers = true
query_over_tcp_only = true
ip_lookup_strategy = 1
max_request_size = 20971520
max_fetch_prev_events = 192
request_conn_timeout = 10
request_timeout = 35
request_total_timeout = 320
request_idle_timeout = 5
request_idle_per_host = 1
well_known_conn_timeout = 6
well_known_timeout = 10
federation_timeout = 300
federation_idle_timeout = 25
federation_idle_per_host = 1
sender_timeout = 180
sender_idle_timeout = 180
sender_retry_backoff_limit = 86400
appservice_timeout = 35
appservice_idle_timeout = 300
pusher_idle_timeout = 15
client_receive_timeout = 75
client_request_timeout = 180
client_response_timeout = 120
client_shutdown_timeout = 10
sender_shutdown_timeout = 5
# If your instance should accept registrations
allow_registration = true
# By default, it's recommended to set a registration token so only people who know it can sign up for it.
registration_token = "your_example_token_here"
# However if you don't really care about it, you can pass following to it.
yes_i_am_very_very_sure_i_want_an_open_registration_server_prone_to_abuse = false
# Allows users to toggle encryption between each other in private rooms and anywhere elese (DMs)
allow_encryption = true
# If you intend this instance to be private, set this to false
allow_federation = false
federation_loopback = false
forget_forced_upon_leave = false
require_auth_for_profile_requests = false
allow_public_room_directory_over_federation = false
allow_public_room_directory_without_auth = false
# We want turn server to properly authenticate us and require everyone else to be authenticated
# As you can probably guess, terrible idea to set this to true.
turn_allow_guests = false
lockdown_public_room_directory = false
allow_device_name_federation = false
allow_inbound_profile_lookup_federation_requests = false
allow_room_creation = true
allow_unstable_room_versions = false
default_room_version = "10"
trusted_servers = ["matrix.org"]
query_trusted_key_servers_first = false
query_trusted_key_servers_first_on_join = false
only_query_trusted_key_servers = true
trusted_server_batch_size = 1024
openid_token_ttl = 3600
login_via_existing_session = true
login_token_ttl = 120000
# TURN example
# Change the IPs to whatever your TURN server runs on. Example here is 10.30.1.11
turn_uris = ["turn:10.30.1.11:3478?transport=tcp", "turn:10.30.1.11:3478?transport=udp"]
turn_secret = "your_secret_from_coturn.conf"
turn_ttl = 86400
# This allows you to make users auto-join rooms and communities they're not in ex. newly created users will join these automatically post-login
# auto_join_rooms = [""]
# RocksDB
rocksdb_log_level = "error"
rocksdb_max_log_file_size = 4194304
rocksdb_log_time_to_roll = 0
rocksdb_optimize_for_spinning_disks = false
rocksdb_direct_io = true
rocksdb_max_log_files = 3
rocksdb_compression_algo = "zstd"
rocksdb_compression_level = 32767
rocksdb_bottommost_compression_level = 32767
rocksdb_bottommost_compression = true
rocksdb_recovery_mode = 1
rocksdb_paranoid_file_checks = false
rocksdb_checksums = true
rocksdb_repair = false
allow_local_presence = true
allow_incoming_presence = false
allow_incoming_read_receipts = false
allow_outgoing_read_receipts = false
allow_outgoing_typing = false
allow_incoming_typing = false
allow_outgoing_presence = false
presence_idle_timeout_s = 300
presence_offline_timeout_s = 1800
presence_timeout_remote_users = true
allow_guest_registration = false
allow_legacy_media = true
admin_log_capture = "info"
admin_room_tag = "m.server_notice"
sentry = false
admin_room_notices = true
db_pool_affinity = true
